<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Juego</title>
</head>
<body>
    <div class="prep" id="prep"> 5 </div>
    <div class="cambio" id="cambio"> 20 </div>
    <div class="total" id="total"> 03:00 </div>
    <div class="letras" id="letras"></div>
    
    
    <script>
      
      let i = 5;
      let k = 180;
      let j = 20;
      let intervaloi;
      let intervalok;
      let intervaloj;

      const words = [
            "apple", "book", "cat", "dog", "elephant", "fish", 
            "grape", "house", "ice", "juice", 
            "red", "lemon", "mouse", "notebook", "orange", 
            "pencil", "queen", "rose", "sun", "tree", 
            "umbrella", "lion", "water", "flower", "soccer", 
            "zebra", "air", "ball", "car", "door", 
            "egg", "fan", "gift", "hat", "igloo", 
            "jam", "key", "lamp", "milk", "nose", 
            "ocean", "paint", "quiet", "ring", "star", 
            "table", "unicorn", "vase", "whale", "soda", 
            "yellow", "zoo", "bat", "cup", "drum", 
            "eye", "fork", "glove", "hand", "backpack", 
            "jacket", "cute", "leaf", "moon", "neck", 
            "owl", "pen", "bear", "rocket", "shoe", 
            "tiger", "purple", "violin", "window", "ball", 
            "yogurt", "zipper", "math", "bubble", "angry", 
            "doll", "bacon", "flag", "guitar", "honey"];

        function prepracion(){
            intervaloi = setInterval(comenzar, 1000);
        }
       
        function comenzar(){
            if (i > 0){
                document.getElementById("prep").innerText= i;
                i--;
            } else {
                clearInterval(intervaloi);
                document.getElementById("prep").innerText= "Empieza!!"
                change();
                game();
                inicio();   
            }
        }


        function aleatorio(){
            const select  = words[Math.floor(Math.random()*words.length)];
            document.getElementById("letras").innerText=select;
        }

        function game(){
            aleatorio();
        }
        
        function inicio(){
            intervalok= setInterval(actua , 1000);
        }

        function change(){
            intervaloj= setInterval(otro , 1000);
        }

        function otro(){
            if (j > 0){
                document.getElementById("cambio").innerText= j;
                j--;
            } else {
                reinicio();
                game();
            }
        }

        function reinicio(){
            clearInterval(intervaloj);
            j=20;
            document.getElementById("cambio").innerText= "20";
            change();
        }

        function actua() {
            if (k > 0) {
                k--;
                let minutos = Math.floor(k / 60);
                let segundos = k % 60;
                document.getElementById("total").innerText =
                    (minutos < 10 ? "0" + minutos : minutos) + ":" + 
                    (segundos < 10 ? "0" + segundos : segundos);
            } else {
                clearInterval(k);
                document.getElementById("total").innerText = "Â¡Tiempo agotado!";
            }
        }

        window.onload = prepracion();
    </script>


</body>
</html>